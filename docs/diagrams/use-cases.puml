@startuml use-cases
!theme plain
skinparam actorStyle awesome

title Диаграмма вариантов использования\nСистема работы с тарифами на услуги

left to right direction

actor "Менеджер по услугам" as Manager
actor "Оператор" as Operator
actor "Клиент" as Client
actor "Администратор" as Admin

rectangle "Система работы с тарифами" {
  
  package "Управление справочниками" {
    usecase UC1 as "Ведение справочника услуг
    --
    Создание, изменение, удаление
    услуг и их параметров"
    
    usecase UC2 as "Ведение справочника тарифов
    --
    Создание и настройка
    тарифов на услуги"
    
    usecase UC3 as "Управление правилами
    --
    Определение правил расчета
    стоимости услуг"
  }
  
  package "Работа с заказами" {
    usecase UC4 as "Формирование заказа
    --
    Создание заказа с указанием
    параметров услуг"
    
    usecase UC5 as "Расчет стоимости заказа
    --
    Автоматический расчет по тарифу
    с применением правил"
    
    usecase UC6 as "Поиск оптимального исполнителя
    --
    Выбор минимальной стоимости
    среди доступных тарифов"
  }
  
  package "Отчетность" {
    usecase UC7 as "Просмотр истории заказов
    --
    Анализ выполненных заказов"
    
    usecase UC8 as "Анализ эффективности тарифов
    --
    Статистика по тарифам"
  }
  
  package "Администрирование" {
    usecase UC9 as "Управление пользователями
    --
    Создание и настройка
    учетных записей"
    
    usecase UC10 as "Настройка системы
    --
    Конфигурация параметров
    системы"
  }
}

' Связи для Менеджера
Manager --> UC1
Manager --> UC2
Manager --> UC3
Manager --> UC8

' Связи для Оператора
Operator --> UC4
Operator --> UC5
Operator --> UC6
Operator --> UC7

' Связи для Клиента
Client --> UC4
Client --> UC5
Client --> UC6

' Связи для Администратора
Admin --> UC9
Admin --> UC10
Admin --> UC1
Admin --> UC2

' Зависимости между вариантами использования
UC5 ..> UC4 : <<include>>
UC6 ..> UC5 : <<include>>
UC2 ..> UC1 : <<include>>
UC3 ..> UC2 : <<include>>

note right of UC5
  Расчет стоимости использует
  правила, определенные в тарифе,
  и параметры из заказа
end note

note bottom of UC6
  Система анализирует все доступные
  тарифы и выбирает оптимальный
  по критерию минимальной стоимости
end note

@enduml
